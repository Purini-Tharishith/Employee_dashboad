{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\nexport let DeleteTaskComponent = class DeleteTaskComponent {\n  constructor(formBuilder, http, router) {\n    this.formBuilder = formBuilder;\n    this.http = http;\n    this.router = router;\n    this.isDeleted = false;\n    this.projects = [];\n    this.tasks = [];\n  }\n  ngOnInit() {\n    const token = JSON.parse(sessionStorage.getItem('key')).token;\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n    this.http.get('http://localhost:8083/api/project/details', {\n      headers\n    }).subscribe(response => {\n      console.log(response);\n      this.projects = response;\n      //this.projectslength = response.length;\n    });\n  }\n\n  DeleteTask() {\n    const token = JSON.parse(sessionStorage.getItem('key')).token;\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n    this.http.delete('http://localhost:8083/api/task/delete/' + this.projectId + '/task/' + this.selectedTaskId, {\n      headers,\n      responseType: 'text'\n    }).subscribe(response => {\n      console.log(response);\n      this.isDeleted = true;\n      this.projectId = '';\n      this.taskId = '';\n      setTimeout(() => {\n        this.isDeleted = false;\n      }, 3000);\n    });\n  }\n  loadTasks() {\n    const token = JSON.parse(sessionStorage.getItem('key')).token;\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n    this.http.get('http://localhost:8083/api/project/all/tasks/' + this.selectedProjectId, {\n      headers,\n      responseType: 'json'\n    }).subscribe({\n      next: response => {\n        console.log(response.taskId);\n        this.tasks = response.taskId;\n      },\n      error: error => {\n        console.log(\"error occured \");\n      }\n    });\n  }\n};\nDeleteTaskComponent = __decorate([Component({\n  selector: 'app-delete-task',\n  templateUrl: './delete-task.component.html',\n  styleUrls: ['./delete-task.component.css']\n})], DeleteTaskComponent);","map":{"version":3,"names":["Component","HttpHeaders","DeleteTaskComponent","constructor","formBuilder","http","router","isDeleted","projects","tasks","ngOnInit","token","JSON","parse","sessionStorage","getItem","headers","get","subscribe","response","console","log","DeleteTask","delete","projectId","selectedTaskId","responseType","taskId","setTimeout","loadTasks","selectedProjectId","next","error","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Purini Tharishith\\Desktop\\project3\\Page\\src\\app\\modules\\manager\\delete-task\\delete-task.component.ts"],"sourcesContent":["import { Component,OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { HttpClient ,HttpHeaders} from '@angular/common/http';\nimport { Router } from '@angular/router';\n@Component({\n  selector: 'app-delete-task',\n  templateUrl: './delete-task.component.html',\n  styleUrls: ['./delete-task.component.css']\n})\nexport class DeleteTaskComponent implements OnInit{\n  \n  taskId:any;\n  projectId:any;\n  selectedProjectId:number;\n  isDeleted:boolean = false;\n  projects:any[]=[];\n  tasks:any[]=[];\n  selectedTaskId:number;\n  constructor(private formBuilder: FormBuilder,private http : HttpClient,private router :Router) { }\n  ngOnInit(): void {\n   \n    const token = JSON.parse(sessionStorage.getItem('key')).token;\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n      \n    this.http.get<any[]>('http://localhost:8083/api/project/details',{headers}).subscribe((response)=>{\n      console.log(response);\n      this.projects = response;\n      //this.projectslength = response.length;\n    })\n  }\n \n  DeleteTask(){\n\n    const token = JSON.parse(sessionStorage.getItem('key')).token;\n    const headers = new HttpHeaders({\n      'Authorization': `Bearer ${token}`\n    });\n     \n    this.http.delete('http://localhost:8083/api/task/delete/'+this.projectId+'/task/'+this.selectedTaskId,{headers,responseType:'text'}).subscribe((response)=>{\n      console.log(response);\n      this.isDeleted = true;\n      this.projectId='';\n      this.taskId='';\n      setTimeout(()=>{\n        this.isDeleted = false;\n      },3000);      \n      \n    })\n  }\n\n  loadTasks(){\n\n    const token = JSON.parse(sessionStorage.getItem('key')).token;\n     const headers = new HttpHeaders({\n       'Authorization': `Bearer ${token}`\n     });\n \n     this.http.get<any[]>('http://localhost:8083/api/project/all/tasks/'+this.selectedProjectId,{headers,responseType:'json'}).subscribe(\n     { next:\n       (response:any)=>{\n       console.log(response.taskId);\n         this.tasks = response.taskId;\n       \n     },\n     error:\n     (error:any)=>{\n       console.log(\"error occured \");\n     }\n     });\n \n  }\n  \n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAe,eAAe;AAEhD,SAAqBC,WAAW,QAAO,sBAAsB;AAOtD,WAAMC,mBAAmB,GAAzB,MAAMA,mBAAmB;EAS9BC,YAAoBC,WAAwB,EAASC,IAAiB,EAASC,MAAc;IAAzE,KAAAF,WAAW,GAAXA,WAAW;IAAsB,KAAAC,IAAI,GAAJA,IAAI;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAJrF,KAAAC,SAAS,GAAW,KAAK;IACzB,KAAAC,QAAQ,GAAO,EAAE;IACjB,KAAAC,KAAK,GAAO,EAAE;EAEmF;EACjGC,QAAQA,CAAA;IAEN,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAACJ,KAAK;IAC7D,MAAMK,OAAO,GAAG,IAAIf,WAAW,CAAC;MAC9B,eAAe,EAAE,UAAUU,KAAK;KACjC,CAAC;IAEF,IAAI,CAACN,IAAI,CAACY,GAAG,CAAQ,2CAA2C,EAAC;MAACD;IAAO,CAAC,CAAC,CAACE,SAAS,CAAEC,QAAQ,IAAG;MAChGC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACrB,IAAI,CAACX,QAAQ,GAAGW,QAAQ;MACxB;IACF,CAAC,CAAC;EACJ;;EAEAG,UAAUA,CAAA;IAER,MAAMX,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAACJ,KAAK;IAC7D,MAAMK,OAAO,GAAG,IAAIf,WAAW,CAAC;MAC9B,eAAe,EAAE,UAAUU,KAAK;KACjC,CAAC;IAEF,IAAI,CAACN,IAAI,CAACkB,MAAM,CAAC,wCAAwC,GAAC,IAAI,CAACC,SAAS,GAAC,QAAQ,GAAC,IAAI,CAACC,cAAc,EAAC;MAACT,OAAO;MAACU,YAAY,EAAC;IAAM,CAAC,CAAC,CAACR,SAAS,CAAEC,QAAQ,IAAG;MACzJC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACrB,IAAI,CAACZ,SAAS,GAAG,IAAI;MACrB,IAAI,CAACiB,SAAS,GAAC,EAAE;MACjB,IAAI,CAACG,MAAM,GAAC,EAAE;MACdC,UAAU,CAAC,MAAI;QACb,IAAI,CAACrB,SAAS,GAAG,KAAK;MACxB,CAAC,EAAC,IAAI,CAAC;IAET,CAAC,CAAC;EACJ;EAEAsB,SAASA,CAAA;IAEP,MAAMlB,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAACJ,KAAK;IAC5D,MAAMK,OAAO,GAAG,IAAIf,WAAW,CAAC;MAC9B,eAAe,EAAE,UAAUU,KAAK;KACjC,CAAC;IAEF,IAAI,CAACN,IAAI,CAACY,GAAG,CAAQ,8CAA8C,GAAC,IAAI,CAACa,iBAAiB,EAAC;MAACd,OAAO;MAACU,YAAY,EAAC;IAAM,CAAC,CAAC,CAACR,SAAS,CACnI;MAAEa,IAAI,EACHZ,QAAY,IAAG;QAChBC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACQ,MAAM,CAAC;QAC1B,IAAI,CAAClB,KAAK,GAAGU,QAAQ,CAACQ,MAAM;MAEhC,CAAC;MACDK,KAAK,EACJA,KAAS,IAAG;QACXZ,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC/B;KACC,CAAC;EAEL;CAED;AAjEYnB,mBAAmB,GAAA+B,UAAA,EAL/BjC,SAAS,CAAC;EACTkC,QAAQ,EAAE,iBAAiB;EAC3BC,WAAW,EAAE,8BAA8B;EAC3CC,SAAS,EAAE,CAAC,6BAA6B;CAC1C,CAAC,C,EACWlC,mBAAmB,CAiE/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}