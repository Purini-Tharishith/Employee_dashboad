{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared-data.service\";\nimport * as i2 from \"@angular/router\";\nexport class MasterInterceptor {\n  constructor(sharedData, router) {\n    this.sharedData = sharedData;\n    this.router = router;\n  }\n  intercept(request, next) {\n    const allowRequest1 = \"http://localhost:8082/api/signup\";\n    const allowRequest2 = \"http://localhost:8082/api/signin\";\n    const allowRequest3 = \"\";\n    if (request.url == allowRequest1 || request.url == allowRequest2) {\n      return next.handle(request);\n    } else {\n      const sessionData = sessionStorage.getItem('key');\n      if (sessionData) {\n        this.token = JSON.parse(sessionStorage.getItem('key')).token;\n        this.cloneRequest = request.clone({\n          setHeaders: {\n            Authorization: `Bearer ${this.token}`\n          }\n        });\n      } else {\n        this.router.navigateByUrl('/login');\n      }\n      return next.handle(this.cloneRequest);\n    }\n  }\n  static #_ = this.ɵfac = function MasterInterceptor_Factory(t) {\n    return new (t || MasterInterceptor)(i0.ɵɵinject(i1.SharedDataService), i0.ɵɵinject(i2.Router));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: MasterInterceptor,\n    factory: MasterInterceptor.ɵfac\n  });\n}","map":{"version":3,"names":["MasterInterceptor","constructor","sharedData","router","intercept","request","next","allowRequest1","allowRequest2","allowRequest3","url","handle","sessionData","sessionStorage","getItem","token","JSON","parse","cloneRequest","clone","setHeaders","Authorization","navigateByUrl","_","i0","ɵɵinject","i1","SharedDataService","i2","Router","_2","factory","ɵfac"],"sources":["C:\\Users\\Purini Tharishith\\Desktop\\project3\\Page\\src\\app\\service\\master.interceptor.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor\n} from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { SharedDataService } from '../shared-data.service';\n@Injectable()\nexport class MasterInterceptor implements HttpInterceptor {\n\n  constructor(private sharedData :SharedDataService,private router :Router) {}\n  token : any;\n  cloneRequest:any;\n  intercept(request: HttpRequest<unknown>, next: HttpHandler): Observable<HttpEvent<unknown>> {\n\n    const allowRequest1=\"http://localhost:8082/api/signup\";\n    const allowRequest2=\"http://localhost:8082/api/signin\";\n    const allowRequest3 = \"\"\n    if(request.url==allowRequest1 || request.url==allowRequest2){\n      return next.handle(request);\n    }\n    else{\n    \n    const sessionData = sessionStorage.getItem('key');\n    if(sessionData){this.token = JSON.parse(sessionStorage.getItem('key')).token\n    this.cloneRequest=request.clone({\n      setHeaders:{\n        Authorization:`Bearer ${this.token}`\n      }\n    })\n  }\n  else{\n    this.router.navigateByUrl('/login');\n  }\n    return next.handle(this.cloneRequest);\n  \n  \n    }\n  \n  }\n}\n\n"],"mappings":";;;AAWA,OAAM,MAAOA,iBAAiB;EAE5BC,YAAoBC,UAA6B,EAASC,MAAc;IAApD,KAAAD,UAAU,GAAVA,UAAU;IAA4B,KAAAC,MAAM,GAANA,MAAM;EAAW;EAG3EC,SAASA,CAACC,OAA6B,EAAEC,IAAiB;IAExD,MAAMC,aAAa,GAAC,kCAAkC;IACtD,MAAMC,aAAa,GAAC,kCAAkC;IACtD,MAAMC,aAAa,GAAG,EAAE;IACxB,IAAGJ,OAAO,CAACK,GAAG,IAAEH,aAAa,IAAIF,OAAO,CAACK,GAAG,IAAEF,aAAa,EAAC;MAC1D,OAAOF,IAAI,CAACK,MAAM,CAACN,OAAO,CAAC;KAC5B,MACG;MAEJ,MAAMO,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC;MACjD,IAAGF,WAAW,EAAC;QAAC,IAAI,CAACG,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACJ,cAAc,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAACC,KAAK;QAC5E,IAAI,CAACG,YAAY,GAACb,OAAO,CAACc,KAAK,CAAC;UAC9BC,UAAU,EAAC;YACTC,aAAa,EAAC,UAAU,IAAI,CAACN,KAAK;;SAErC,CAAC;OACH,MACG;QACF,IAAI,CAACZ,MAAM,CAACmB,aAAa,CAAC,QAAQ,CAAC;;MAEnC,OAAOhB,IAAI,CAACK,MAAM,CAAC,IAAI,CAACO,YAAY,CAAC;;EAKvC;EAAC,QAAAK,CAAA,G;qBA/BUvB,iBAAiB,EAAAwB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,iBAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAjB9B,iBAAiB;IAAA+B,OAAA,EAAjB/B,iBAAiB,CAAAgC;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}